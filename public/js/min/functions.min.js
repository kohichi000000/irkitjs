function buttonListMaker(){if(define.status.data){buttonArray=JSON.parse(localStorage.getItem("irkitJsData")),newButtonArray=[];for(var t=0;t<buttonArray.length;t++)newButtonObj={buttonId:t,buttonData:buttonArray[t].buttonData,buttonName:buttonArray[t].buttonName},newButtonArray.push(newButtonObj),$("ul.buttonList").prepend('\n        <li data-button-id="'+t+'">\n          <button class="remoteControllers">'+buttonArray[t].buttonName+'</button>\n          <div class="delete subButton"></div>\n          <div class="edit subButton"></div>\n          <div class="sortUp subButton"></div>\n          <div class="sortDown subButton"></div>\n        </li>\n      ');0!=newButtonArray.length&&(localStorage.removeItem("irkitJsData"),storeToStorageSimple(newButtonArray,"irkitJsData")),buttonListPosition()}}function buttonListPosition(){buttonListArray=$("ul.buttonList").children("li"),buttonListArrayHeight=buttonListArray.height();for(var t=0;t<buttonListArray.length;t++)$(buttonListArray[t]).animate({top:buttonListArrayHeight*t},0).find("button").css({left:"0px"});$("ul.buttonList").height(buttonListArray.length*buttonListArrayHeight)}function buttonIdSort(t){return t.sort(function(t,e){return t.buttonId<e.buttonId?-1:t.buttonId>e.buttonId?1:0}),t}function initFunction(){0==define.loadCounter&&(addButton(),define.loadCounter++),ajaxLinkClick(),initContentHeight(),buttonListMaker(),dataInitialize(),button_init(),add_device_init(),clickOpener()}function registerFunction(){getAppsKey(),getClientkey(),selectVisualControll(),getSerializeKey(),initContentHeight(),ajaxLinkClick(),initThanks(),add_device_getDeviceId(),clickOpener()}function getAppsKey(){$("#getAppsKey").click(function(){$.ajax({url:define.url.apps,type:"POST",dataType:"json",data:{email:$("#getAppsKeyBody").val()}}).done(function(){storeToStorageSimple($("#getAppsKeyBody").val(),"email"),ajaxGetPage("init.clientkey.html")}).fail(function(t){console.log(t),localStorage.clear()})})}function getClientkey(){$("#getClientKey").click(function(){$.ajax({url:define.url.clients,type:"POST",dataType:"json",data:{apikey:$("#getClientKeyBody").val()}}).done(function(t){console.log("getClientkey is success"),storeToStorageSimple($("#getClientKeyBody").val(),"apikey"),storeToStorageSimple(t.clientkey,"clientkey"),getDeviceId()}).fail(function(){console.log("getClientkey is error"),localStorage.clear()}).always(function(){console.log("getClientkey is complete")})})}function getDeviceId(){$.ajax({url:define.url.devices,type:"POST",dataType:"json",data:{clientkey:getFromStorage("clientkey")}}).done(function(t){storeToStorage(t,"devicekey"),storeToStorage(t,"deviceid"),ajaxGetPage("init.wifi.html"),console.log("getDeviceId is success")}).fail(function(){console.log("getDeviceId is error"),localStorage.clear()}).always(function(){console.log("getDeviceId is complete")})}function getWifiSetting(t,e){console.log(t),console.log(e),storeToStorageSimple(e,"recieveThanks"),$("#wifiSetting").click(function(){console.log("getWifiSetting is success"),$("#contents").children().animate({"margin-left":"-50%",opacity:"0"},define.a,function(){$(this).remove(),$("#contents").prepend(t),initFunction(),$("#contents").children().css({"margin-left":"50%",opacity:"0"}).animate({"margin-left":"0",opacity:"1"},define.a,function(){registerFunction(),console.log("registerFunction is excuted")})})})}function selectVisualControll(){var t=function(t){switch(t){case"0":return"WPA_WPA2";case"1":return"WEP";case"2":return"NONE"}};$("#selectVisual").text(t($("#getSecurityType").val())),$("#getSecurityType").change(function(){$("#selectVisual").text(t($("#getSecurityType").val()))})}function getSerializeKey(){$("#getSerializedKey").click(function(){storeToStorageSimple($("#getSecurityType").val(),"securityType"),storeToStorageSimple($("#getSsid").val(),"ssid"),storeToStorageSimple($("#getPassword").val(),"password");var t=keyserializer.serialize({security:function(t){switch(t){case"0":return keyserializer.SECURITY_WPA_WPA2;case"1":return keyserializer.SECURITY_WEP;case"2":return keyserializer.SECURITY_NONE}}(getFromStorage("securityType")),ssid:getFromStorage("ssid"),password:getFromStorage("password"),devicekey:getFromStorage("devicekey")});postSerializeKey(t),recieveThanks=getFromStorage("recieveThanks"),$("#contents").children().animate({"margin-left":"-50%",opacity:"0"},define.a,function(){$(this).remove(),$("#contents").prepend(recieveThanks),initFunction(),$("#contents").children().css({"margin-left":"50%",opacity:"0"}).animate({"margin-left":"0",opacity:"1"},define.a,function(){registerFunction(),console.log("registerFunction is excuted")})}),initFunction()})}function postSerializeKey(t){$.ajax({url:"http://192.168.1.1/wifi",type:"POST",data:t}).done(function(t){storeToStorageSimple(t,"hostname"),console.log("success")}).fail(function(){localStorage.clear(),console.log("error")}),console.log("ajax is end")}function initThanks(){$("#thanks").click(function(){location.reload(!0)})}function initVerifyer(){(void 0==localStorage.email||void 0==localStorage.clientkey||void 0==localStorage.deviceid||void 0==localStorage.devicekey)&&(define.status.account=!1,console.log("status check is false")),"true"==localStorage.addDeviceFlag&&(define.status.account=!0,console.log("localStorage.addDeviceFlag is true")),localStorage.irkitJsData||(define.status.data=!1)}function initContentHeight(){if(define.status.account)$("#contents").height(define.h()-$("header").height()-$("nav").height());else{var t=define.h()-$("header").height(),e=$("section").height();$("#contents").height(t),$("section").css({"margin-top":Math.floor((t-e)/2-$("header").height())})}}function addButton(){$(".addButton").click(function(){appearBottunConsole()})}function appearBottunConsole(){$.ajax({url:"add.html",type:"GET",dataType:"html"}).done(function(t){$("body").prepend('<div class="appearButtonShadow"></div>'),$("#contents").append(t).addClass("none").delay(define.a).removeClass("none"),addButtonName()}).fail(function(){console.log("error")})}function ajaxGet(){console.log("ajaxGet is start");var t=$.ajax({type:"GET",url:define.url.messages,async:!1,data:{clear:1,clientkey:getFromStorage("clientkey")},cache:!1,dataType:"json",timeout:1e3}).done(function(t){return console.log("ajaxGet is success"),t.message}).fail(function(){console.log("get is error")}),e=new Function("return "+t.responseText)();return e.message}function addButtonName(){$("#addButtonName").click(function(){var t=$("#addButtonNameBody").val();void 0!=t[0]?(storeNewButton([ajaxGet(),t]),$("#addButtonName").off(),$("#addButtonNameConsole").hide(0,function(){$(this).remove()}),$(".appearButtonShadow").hide(0,function(){$(this).remove()})):console.log("名前を入れて下さい")})}function storeNewButton(t){buttonObj={buttonId:buttonArray.length,buttonData:t[0],buttonName:t[1]},buttonArray.push(buttonObj),localStorage.setItem("irkitJsData",JSON.stringify(buttonArray)),$("ul.buttonList").children("li").remove(),location.reload(!0)}function storeToStorage(t,e){localStorage.setItem(e,JSON.stringify(t[e]))}function storeToStorageSimple(t,e){localStorage.setItem(e,JSON.stringify(t))}function getFromStorage(t){return JSON.parse(localStorage.getItem(t))}function deleteFromStorage(t){return JSON.parse(localStorage.removeItem(t))}function dataInitialize(){$(".clear").click(function(){return localStorage.clear(),location.reload(!0),!1})}function ajaxLinkClick(){$("a").off().click(function(){return ajaxGetPage($(this).attr("href"),$(this).hasClass("outerLink")),!1})}function ajaxGetPage(t,e){return e?(location.href(t),void 0):($.ajax({url:t,type:"GET",dataType:"html"}).done(function(e){console.log(t+" ajaxGetPage is success"),checkUrl=this.url,$("#contents").children().animate({"margin-left":"-50%",opacity:"0"},define.a,function(){$(this).remove(),$("#contents").prepend(e),initFunction(),$("#contents").children().css({"margin-left":"50%",opacity:"0"}).animate({"margin-left":"0",opacity:"1"},define.a,function(){window.history.pushState(null,null,"?ref="+checkUrl)}),"home.html"==checkUrl||checkUrl.match(/init./)&&("init.wifi.html"==checkUrl&&getWifiSetting(ajaxGetPageStore("init.serialize.html"),ajaxGetPageStore("init.thanks.html")),registerFunction())})}),void 0)}function ajaxGetPageStore(t){var e=$.ajax({url:t,type:"GET",dataType:"html",async:!1}).done(function(t){return console.log("ajaxGetPageStore is success"),t});return e.responseText}function ajaxGetPageInit(){initVerifyer(),0==define.status.account?(void 0==localStorage.email?targetUrl="init.mail.html":void 0==localStorage.clientkey&&void 0==localStorage.deviceid&&void 0==localStorage.devicekey?targetUrl="init.clientkey.html":void 0==localStorage.securityType&&void 0==localStorage.ssid&&void 0==localStorage.password&&void 0==localStorage.devicekey&&(targetUrl="init.serialize.html"),$("body").addClass("initialize"),$("nav").addClass("disabled")):targetUrl="home.html",$.ajax({url:targetUrl,type:"GET",dataType:"html"}).done(function(t){$("#contents").prepend(t),"home.html"==targetUrl?initFunction():targetUrl.match(/init./)&&registerFunction()})}function tabSubButton(t,e){checkNum=parseInt($(e).find("button").css("left")),console.log(checkNum),0>checkNum?(console.log("right button is excuted"),t>0&&52>t?(console.log("appearButtonEditConsole is excuted"),appearButtonEditConsole(e)):t>52&&104>t&&tabSubButtonDelete(e)):checkNum>0&&(t>0&&52>t?tabSubButtonSortUp(e):t>52&&104>t&&tabSubButtonSortDown(e))}function tabSubButtonDelete(t){buttonArray=getFromStorage("irkitJsData"),targetId=$(t).attr("data-button-id"),buttonArray.splice(targetId,1),localStorage.removeItem("irkitJsData"),storeToStorageSimple(buttonArray,"irkitJsData"),$(t).animate({"margin-left":"-50%",opacity:"0"},define.a,function(){$(this).remove(),buttonListPosition()})}function tabSubButtonEdit(t){buttonArray=getFromStorage("irkitJsData"),targetId=$(t).attr("data-button-id"),$("#editButtonName").click(function(){var t=$("#editButtonNameBody").val();void 0!=t[0]?(buttonArray[targetId].buttonName=t,$("#editButtonName").off(),$("#editButtonNameConsole").hide(0,function(){$(this).remove()}),$(".appearButtonShadow").hide(0,function(){$(this).remove()})):console.log("名前を入れて下さい"),localStorage.removeItem("irkitJsData"),storeToStorageSimple(buttonArray,"irkitJsData"),$(".buttonList").children("li").remove(),initFunction()})}function appearButtonEditConsole(t){$.ajax({url:"edit.html",type:"GET",dataType:"html"}).done(function(e){$("body").prepend('<div class="appearButtonShadow"></div>'),$("#contents").append(e).addClass("none").delay(define.a).removeClass("none"),tabSubButtonEdit(t)}).fail(function(){console.log("error")})}function tabSubButtonSortUp(t){return console.log("tabSubButtonSortUp is excuted"),buttonArray=getFromStorage("irkitJsData"),targetId=Number($(t).attr("data-button-id")),void 0==buttonArray[targetId+1]?!1:(localStorage.removeItem("irkitJsData"),buttonArray[targetId].buttonId=targetId+1,buttonArray[targetId+1].buttonId=targetId,current=$(t).css("top"),prev=$(t).prev("li").css("top"),$(t).attr("data-button-id",targetId+1),$(t).prev("li").attr("data-button-id",targetId),holdItem=$(t).prev("li"),$(t).animate({top:prev},define.a,function(){$(this).after(holdItem),$(holdItem).animate({top:current},define.a)}),buttonIdSort(buttonArray),storeToStorageSimple(buttonArray,"irkitJsData"),void 0)}function tabSubButtonSortDown(t){return buttonArray=getFromStorage("irkitJsData"),targetId=Number($(t).attr("data-button-id")),void 0==buttonArray[targetId-1]?!1:(localStorage.removeItem("irkitJsData"),buttonArray[targetId].buttonId=targetId-1,buttonArray[targetId-1].buttonId=targetId,current=$(t).css("top"),next=$(t).next("li").css("top"),$(t).attr("data-button-id",targetId-1),$(t).next("li").attr("data-button-id",targetId),holdItem=$(t).next("li"),$(t).animate({top:next},define.a,function(){$(this).before(holdItem),$(holdItem).animate({top:current},define.a)}),buttonIdSort(buttonArray),storeToStorageSimple(buttonArray,"irkitJsData"),void 0)}function clickOpener(){$(".clickOpener").click(function(){$(this).next(".clickOpenerBody").toggle(define.a)})}function ajaxPost(t,e){$.ajax({type:"POST",url:define.url.messages,data:{clientkey:getFromStorage("clientkey"),deviceid:getFromStorage("deviceid"),message:JSON.stringify(t)},cache:!1,timeout:1e3}).done(function(){window.setTimeout(function(){$(e.target).find(".checkmark").addClass("active").animate({opacity:0},4*define.a,function(){$(this).remove()})},2*define.a),console.log("success")}).fail(function(){return!1}).complete(function(){console.log("complete")})}function ajaxPostPre(t){$(t.target).append('\n    <div class="checkmark"></div>\n	')}function button_init(){for(var t=$(".buttonList"),e=$(".buttonList").children("li"),n=button_swipe_makedata(),o=0;o<e.length;o++){var i=new Hammer(e[o]);i.add(new Hammer.Press({event:"touchend"})),i.on("panleft panright panend tap press pressup touchend",button_devide)}if(void 0!=t[0]){var a=new Hammer(t[0]);a.add(new Hammer.Pan({direction:Hammer.DIRECTION_VERTICAL,threshold:1})),a.on("pandown panup",function(t){button_swipe(t,n)})}}function button_swipe_makedata(){for(var t=$(".buttonList").children("li"),e=[],n=0;n<t.length;n++){var o=$(t[n]).offset().top-$("header").height(),i=[o,o+($(t[n]).height()-1)];e.push(i)}return e}function button_swipe(t,e){for(var n=$(".buttonList").children("li"),o=t.center.y-$("header").height(),i=0;i<e.length;i++)if(e[i][0]<o&&e[i][1]>o&&!a){buttonId=Number($(n[i]).attr("data-button-id")),ajaxPost(getFromStorage("irkitJsData")[buttonId].buttonData,t);var a=!0}}function button_devide(t){var e=$(t.target).parent("li").attr("data-button-id");switch(t.type){case"tap":button_excute_tap(t,e);break;case"press":console.log("press is excuted"),console.log(t),button_excute_hold(t,e);break;case"pressup":console.log("pressup is excuted"),console.log(t),button_stop_hold();break;case"panleft":button_excute_panleft(t,e);break;case"panright":button_excute_panright(t,e);break;case"panend":button_excute_panend(t,e)}}function button_excute_panleft(t){$(t.target).parent("li").find(".edit").addClass("active"),parseInt($(t.target).parent("li").find("button").css("left"))<=0?$(t.target).parent("li").find("button").css("left",-t.distance+"px"):$(t.target).parent("li").find("button").css("left",t.distance+"px"),t.distance>52&&($(t.target).parent("li").find(".edit").removeClass("active"),$(t.target).parent("li").find(".delete").addClass("active")),t.distance>104&&$(t.target).parent("li").find("button").css("left","-104px")}function button_excute_panright(t){$(t.target).parent("li").find(".sortUp").addClass("active"),$(t.target).parent("li").find("button").css("left",t.distance+"px"),t.distance>52&&($(t.target).parent("li").find(".sortUp").removeClass("active"),$(t.target).parent("li").find(".sortDown").addClass("active")),t.distance>104&&$(t.target).parent("li").find("button").css("left","104px")}function button_excute_panend(t){$(t.target).parent("li").find("button").animate({left:"0px"},define.a),tabSubButton(t.distance,$(t.target).parent("li"))}function button_excute_tap(t,e){ajaxPostPre(t),ajaxPost(getFromStorage("irkitJsData")[e].buttonData,t)}function button_excute_hold(t,e){button_hold_timer=setInterval(function(){button_excute_tap(t,e)},5*define.a)}function button_stop_hold(){clearInterval(button_hold_timer)}function add_device_init(){console.log("add_device is excuted"),add_device_getKey()}function add_device_getKey(){getClientKey=getFromStorage("clientkey"),getDeviceKey=getFromStorage("devicekey"),getDeviceId=getFromStorage("deviceid"),$("#display_clientkey").text(getClientKey),$("#display_devicekey").text(getDeviceKey),$("#display_deviceid").text(getDeviceId)}function add_device_getDeviceId(){console.log("add_device_getDeviceId is excuted"),$("#addDeviceInputButton").click(function(){setClientKey=$("#addDeviceTextArea_clientkey").val(),setDeviceKey=$("#addDeviceTextArea_devicekey").val(),setDeviceId=$("#addDeviceTextArea_deviceid").val(),storeToStorageSimple(setClientKey,"clientkey"),storeToStorageSimple(setDeviceKey,"devicekey"),storeToStorageSimple(setDeviceId,"deviceid"),storeToStorageSimple(!0,"addDeviceFlag"),$.ajax({url:define.url.door,type:"POST",dataType:"json",data:{clientkey:getFromStorage("clientkey"),deviceid:getFromStorage("deviceid")}}).done(function(){console.log("door check is success")}).fail(function(){localStorage.clear(),console.log("door check is error")}).always(function(){console.log("door check is complete"),location.reload(!0)})})}function buttonPress(t){console.log(t.type),console.log("buttonPress is excuted"),"release"==t.type&&(console.log(t.type),console.log("buttonPress is released"))}!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.keyserializer=t()}}(function(){return function t(e,n,o){function i(r,c){if(!n[r]){if(!e[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){var n=e[r][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e){function n(t,e,n){var a,r,c;for(a="undefined"==typeof n?o:n,r=0;e>r;r++){var s;if("number"==typeof t){if(t>255)throw"only input less than 1byte as number";s=t}else{if("string"!=typeof t)throw"only number or string allowed";s=r<t.length?t.charCodeAt(r):0}for(a^=s,c=0;8>c;c++)128&a?a=a<<1^i:a<<=1;a&=255}return a}var o=0,i=49;e.exports=n},{}],2:[function(t,e){function n(t){return t}function o(t){for(var e="",n=0;n<t.length;n++)e+=t.charCodeAt(n).toString(16).toUpperCase();return e}function i(t){for(var e="",n=0;n<t.length;n++)e+=t.charCodeAt(n).toString(16).toUpperCase();return e}function a(t){for(var e="",n=0;n<t.length;n++)e+=t.charCodeAt(n).toString(16).toUpperCase();return i(e)}function r(t){return t}function c(t){var e;return e=l(t.security,1),e=l(t.ssid,33,e),e=l(t.password,64,e),e=l(1,1,e),e=l(0,1,e),e=l(t.devicekey,33,e),e.toString(16).toUpperCase()}function s(t){return[n(t.security),o(t.ssid),t.security==d?a(t.password):i(t.password),r(t.devicekey),"2","","","","","",c(t)].join("/")}var l=t("./crc8");const u=8,d=2,g=0;e.exports={serialize:s,SECURITY_WPA_WPA2:u,SECURITY_WEP:d,SECURITY_NONE:g}},{"./crc8":1}]},{},[2])(2)});var define={w:function(){return $(window).width()},h:function(){return $(window).height()},s:function(){return $(document).scrollTop()},b:480,a:200,url:{messages:"https://api.getirkit.com/1/messages",clients:"https://api.getirkit.com/1/clients",apps:"https://api.getirkit.com/1/apps",devices:"https://api.getirkit.com/1/devices",door:"https://api.getirkit.com/1/door"},status:{account:!0,data:!0},loadCounter:0};buttonArray=[],irkitJsDataStore={},$(window).load(function(){ajaxGetPageInit()}),function(t,e,n,o,i,a,r){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,a=e.createElement(n),r=e.getElementsByTagName(n)[0],a.async=1,a.src=o,r.parentNode.insertBefore(a,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-33205064-8","auto"),ga("require","linkid","linkid.js"),ga("send","pageview");
//# sourceMappingURL=functions.min.js.map