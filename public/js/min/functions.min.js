function initVerifyer(){(void 0==localStorage.email||void 0==localStorage.clientkey||void 0==localStorage.deviceid||void 0==localStorage.devicekey)&&(define.status.account=!1),localStorage.irkitJsData||(define.status.data=!1)}function initContentHeight(){if(define.status.account)$("#contents").height(define.h()-$("header").height()-$("nav").height());else{var t=define.h()-$("header").height(),e=$("section").height();$("#contents").height(t),$("section").css({"margin-top":Math.floor((t-e)/2-$("header").height())})}}function buttonListMaker(){if(define.status.data){buttonArray=JSON.parse(localStorage.getItem("irkitJsData")).buttonDataStore;for(var t=0;t<buttonArray.length;t++)$("ul.buttonList").prepend('<li data-button-id="'+buttonArray[t].buttonId+'"><button class="remoteControllers">'+buttonArray[t].buttonName+'</button><div class="delete subButton"></div><div class="edit subButton"></div><div class="sortUp subButton"></div><div class="sortDown subButton"></div></li>')}}function addButton(){$(".addButton").click(function(){appearBottunConsole()})}function appearBottunConsole(){$.ajax({url:"add.html",type:"GET",dataType:"html"}).done(function(t){$("body").prepend('<div class="appearButtonShadow"></div>'),$("#contents").append(t).addClass("none").delay(define.a).removeClass("none"),addButtonName()}).fail(function(){console.log("error")})}function ajaxGet(){console.log("ajaxGet is start"),$.ajax({type:"GET",url:define.url.messages,async:!1,data:{clear:1,clientkey:getFromStorage("clientkey")},cache:!1,dataType:"json",timeout:1e3}).done(function(t){return t.message}).fail(function(){console.log("get is error")})}function addButtonName(){$("#addButtonName").click(function(){var t=$("#addButtonNameBody").val();void 0!=t[0]?(storeNewButton([ajaxGet(),t]),$("#addButtonName").off(),$("#addButtonNameConsole").hide(0,function(){$(this).remove()}),$(".appearButtonShadow").hide(0,function(){$(this).remove()})):console.log("名前を入れて下さい")})}function storeNewButton(t){buttonObj={buttonId:buttonArray.length,buttonData:t[0],buttonName:t[1]},buttonArray.push(buttonObj),irkitJsDataStore.buttonDataStore=buttonArray,localStorage.setItem("irkitJsData",JSON.stringify(irkitJsDataStore)),$("ul.buttonList").prepend('<li data-button-id="'+buttonObj.buttonId+'"><button class="remoteControllers">'+buttonObj.buttonName+"</button></li>"),tapButton(),tabSubButton()}function storeToStorage(t,e){localStorage.setItem(e,JSON.stringify(t[e]))}function storeToStorageSimple(t,e){localStorage.setItem(e,JSON.stringify(t))}function getFromStorage(t){return JSON.parse(localStorage.getItem(t))}function deleteFromStorage(t){return JSON.parse(localStorage.removeItem(t))}function getAppsKey(){$("#getAppsKey").click(function(){$.ajax({url:define.url.apps,type:"POST",dataType:"json",data:{email:$("#getAppsKeyBody").val()}}).done(function(){storeToStorageSimple($("#getAppsKeyBody").val(),"email"),ajaxGetPage("init.clientkey.html")}).fail(function(t){console.log(t)})})}function getClientkey(){$("#getClientKey").click(function(){$.ajax({url:define.url.clients,type:"POST",dataType:"json",data:{apikey:$("#getClientKeyBody").val()}}).done(function(t){storeToStorageSimple($("#getClientKeyBody").val(),"apikey"),storeToStorageSimple(t.clientkey,"clientkey"),getDeviceId(),ajaxGetPage("init.wifi.html")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})}function getDeviceId(){$.ajax({url:define.url.devices,type:"POST",dataType:"json",data:{clientkey:getFromStorage("clientkey")}}).done(function(t){storeToStorage(t,"devicekey"),storeToStorage(t,"deviceid")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}function getWifiSetting(){$("#wifiSetting").click(function(){$.ajax({url:define.url.clients,type:"POST",dataType:"json",data:{apikey:getFromStorage("clientkey")}}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete"),ajaxGetPage("init.serialize.html")})})}function getSerializeKey(){$("#getSerializedKey").click(function(){storeToStorageSimple($("#getSecurityType").val(),"securityType"),storeToStorageSimple($("#getSsid").val(),"ssid"),storeToStorageSimple($("#getPassword").val(),"password");var t=keyserializer.serialize({security:function(t){switch(t){case"0":return keyserializer.SECURITY_WPA_WPA2;case"1":return keyserializer.SECURITY_WEP;case"2":return keyserializer.SECURITY_NONE}}(getFromStorage("securityType")),ssid:getFromStorage("ssid"),password:getFromStorage("password"),devicekey:getFromStorage("devicekey")});postSerializeKey(t),ajaxGetPage("init.thanks.html"),ajaxLinkClick()})}function postSerializeKey(t){$.ajax({url:"http://192.168.1.1/wifi",type:"POST",data:t}).done(function(){console.log("success")}).fail(function(){console.log("error")}),console.log("ajax is end")}function tapButton(){$(".remoteControllers").click(function(){ajaxPost(getFromStorage("irkitJsData").buttonDataStore[$(this).parent().attr("data-button-id")].buttonData)})}function ajaxPost(t){$.ajax({type:"POST",url:define.url.messages,data:{clientkey:getFromStorage("clientkey"),deviceid:getFromStorage("deviceid"),message:JSON.stringify(t)},cache:!1,timeout:1e3}).done(function(){console.log("success")}).fail(function(t){console.log(t)})}function tabSubButton(){$(".subButton").click(function(){switch($(this).attr("class")){case"delete subButton":tabSubButtonDelete(this);break;case"edit subButton":tabSubButtonEdit(this);break;case"sortUp subButton":tabSubButtonSortUp(this);break;case"sortDown subButton":tabSubButtonSortDown(this)}})}function tabSubButtonDelete(t){buttonArray=getFromStorage("irkitJsData").buttonDataStore,targetId=getFromStorage("irkitJsData").buttonDataStore[$(t).parent("li").attr("data-button-id")].buttonId,buttonArray.splice(targetId,1),localStorage.removeItem("irkitJsData"),storeToStorageSimple("irkitJsData",buttonArray),buttonListMaker()}function tabSubButtonEdit(){}function tabSubButtonSortUp(){}function tabSubButtonSortDown(){}function ajaxLinkClick(){$("a").click(function(){return ajaxGetPage($(this).attr("href")),!1})}function ajaxGetPage(t){$.ajax({url:t,type:"GET",dataType:"html"}).done(function(t){checkUrl=this.url,$("#contents").children().animate({"margin-left":"-50%",opacity:"0"},define.a,function(){$(this).remove(),$("#contents").prepend(t),initContentHeight(),ajaxLinkClick(),$("#contents").children().css({"margin-left":"50%",opacity:"0"}).animate({"margin-left":"0",opacity:"1"},define.a,function(){}),"home.html"==checkUrl?(addButton(),buttonListMaker()):"init.clientkey.html"==checkUrl?getClientkey():"init.serialize.html"==checkUrl?(getSerializeKey(),selectVisualControll()):"init.wifi.html"==checkUrl?(getWifiSetting(),ajaxLinkClick()):"init.thanks.html"==checkUrl&&ajaxLinkClick()})})}function selectVisualControll(){var t=function(t){switch(t){case"0":return"WPA_WPA2";case"1":return"WEP";case"2":return"NONE"}};$("#selectVisual").text(t($("#getSecurityType").val())),$("#getSecurityType").change(function(){$("#selectVisual").text(t($("#getSecurityType").val()))})}function ajaxGetPageInit(){initVerifyer(),ajaxLinkClick(),0==define.status.account?(void 0==localStorage.email?targetUrl="init.mail.html":void 0==localStorage.clientkey&&void 0==localStorage.deviceid&&void 0==localStorage.devicekey?targetUrl="init.clientkey.html":void 0==localStorage.securityType&&void 0==localStorage.ssid&&void 0==localStorage.password&&void 0==localStorage.devicekey&&(targetUrl="init.serialize.html"),$("body").addClass("initialize"),$("nav").addClass("disabled")):targetUrl="home.html",$.ajax({url:targetUrl,type:"GET",dataType:"html"}).done(function(t){$("#contents").prepend(t),getAppsKey(),initContentHeight(),buttonListMaker(),addButton(),tapButton(),tabSubButton()})}var define={w:function(){return $(window).width()},h:function(){return $(window).height()},s:function(){return $(document).scrollTop()},b:480,a:200,url:{messages:"https://api.getirkit.com/1/messages",clients:"https://api.getirkit.com/1/clients",apps:"https://api.getirkit.com/1/apps",devices:"https://api.getirkit.com/1/devices"},status:{account:!0,data:!0}};buttonArray=[],irkitJsDataStore={},$(window).load(function(){ajaxGetPageInit()});
//# sourceMappingURL=functions.min.js.map